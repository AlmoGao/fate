{"ast":null,"code":"import { ref } from 'vue';\nexport default {\n  __name: 'Layout',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const curr = ref(0);\n    const dataMap = ref({\n      1: {\n        name: '大安'\n      },\n      2: {\n        name: '留连'\n      },\n      3: {\n        name: '速喜'\n      },\n      4: {\n        name: '赤口'\n      },\n      5: {\n        name: '小吉'\n      },\n      6: {\n        name: '空亡'\n      },\n      7: {\n        name: '病符'\n      },\n      8: {\n        name: '桃花'\n      },\n      9: {\n        name: '天德'\n      }\n    });\n    let count = 0; // 初始值\n    let interval = null;\n    const run = num => {\n      return new Promise(resolve => {\n        if (num <= 0) return resolve(curr.value);\n        if (num > 81) num = num % 81;\n        num = Math.ceil(num);\n        let n = 0;\n        interval = setInterval(() => {\n          count += 1;\n          n += 1;\n          curr.value = count % 9 == 0 ? 9 : count % 9;\n          console.error(count, n, num);\n          if (n == num) {\n            clearInterval(interval);\n            resolve(curr.value);\n          }\n        }, 200);\n      });\n    };\n    const result = ref([]);\n    const start = async arr => {\n      run(arr[0]).then(r1 => {\n        result.value[0] = r1;\n        setTimeout(() => {\n          run(arr[1]).then(r2 => {\n            result.value[1] = r2;\n            setTimeout(() => {\n              run(arr[2]).then(r3 => {\n                result.value[2] = r3;\n                setTimeout(() => {\n                  curr.value = 0;\n                }, 1500);\n              });\n            }, 1500);\n          });\n        }, 1500);\n      });\n    };\n    const init = () => {\n      count = 0;\n      result.value = [];\n      if (interval) clearInterval(interval);\n    };\n    setTimeout(() => {\n      start([17, 22, 13]);\n    }, 2000);\n    const __returned__ = {\n      curr,\n      dataMap,\n      get count() {\n        return count;\n      },\n      set count(v) {\n        count = v;\n      },\n      get interval() {\n        return interval;\n      },\n      set interval(v) {\n        interval = v;\n      },\n      run,\n      result,\n      start,\n      init,\n      ref\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","curr","dataMap","name","count","interval","run","num","Promise","resolve","value","Math","ceil","n","setInterval","console","error","clearInterval","result","start","arr","then","r1","setTimeout","r2","r3","init"],"sources":["D:/_My/products/fate/src/views/Layout/Layout.vue"],"sourcesContent":["<!-- 页面容器 -->\r\n<template>\r\n    <div class=\"page-layout\">\r\n        <!-- 结果 -->\r\n        <div>\r\n            <div v-for=\"(item, i) in result\" :key=\"i\">{{ dataMap[item].name || '' }}</div>\r\n        </div>\r\n\r\n        <!-- 手 -->\r\n        <div class=\"hand\">\r\n            <div class=\"hand-item hand0\">\r\n                <div class=\"line1\"></div>\r\n                <div class=\"line2\"></div>\r\n                <div class=\"line3\"></div>\r\n            </div>\r\n            <div class=\"hand-item hand1\">\r\n                <div class=\"finger finger1\" :class=\"{ 'curr-finger': curr == 2 }\">{{ dataMap[2].name }}</div>\r\n                <div class=\"finger finger2\" :class=\"{ 'curr-finger': curr == 1 }\">{{ dataMap[1].name }}</div>\r\n                <div class=\"finger finger3\" :class=\"{ 'curr-finger': curr == 8 }\">{{ dataMap[8].name }}</div>\r\n                <div class=\"finger-shadow\"></div>\r\n            </div>\r\n            <div class=\"hand-item hand2\">\r\n                <div class=\"finger finger1\" :class=\"{ 'curr-finger': curr == 3 }\">{{ dataMap[3].name }}</div>\r\n                <div class=\"finger finger2\" :class=\"{ 'curr-finger': curr == 6 }\">{{ dataMap[6].name }}</div>\r\n                <div class=\"finger finger3\" :class=\"{ 'curr-finger': curr == 5 }\">{{ dataMap[5].name }}</div>\r\n                <div class=\"finger-shadow\"></div>\r\n            </div>\r\n            <div class=\"hand-item hand3\">\r\n                <div class=\"finger finger1\" :class=\"{ 'curr-finger': curr == 7 }\">{{ dataMap[7].name }}</div>\r\n                <div class=\"finger finger2\" :class=\"{ 'curr-finger': curr == 4 }\">{{ dataMap[4].name }}</div>\r\n                <div class=\"finger finger3\" :class=\"{ 'curr-finger': curr == 9 }\">{{ dataMap[9].name }}</div>\r\n                <div class=\"finger-shadow\"></div>\r\n            </div>\r\n            <div class=\"hand4\"></div>\r\n            <div class=\"hand5\" :class=\"['hand5-' + curr]\">\r\n                <div class=\"hand5-item1\"></div>\r\n                <div class=\"hand5-item2\"></div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from 'vue'\r\n\r\nconst curr = ref(0)\r\nconst dataMap = ref({\r\n    1: { name: '大安' },\r\n    2: { name: '留连' },\r\n    3: { name: '速喜' },\r\n    4: { name: '赤口' },\r\n    5: { name: '小吉' },\r\n    6: { name: '空亡' },\r\n    7: { name: '病符' },\r\n    8: { name: '桃花' },\r\n    9: { name: '天德' },\r\n})\r\n\r\nlet count = 0 // 初始值\r\nlet interval = null\r\nconst run = num => {\r\n    return new Promise(resolve => {\r\n        if (num <= 0) return resolve(curr.value)\r\n        if (num > 81) num = num % 81\r\n        num = Math.ceil(num)\r\n        let n = 0\r\n        interval = setInterval(() => {\r\n            count += 1\r\n            n += 1\r\n            curr.value = count % 9 == 0 ? 9 : count % 9\r\n            console.error(count, n, num)\r\n            if (n == num) {\r\n                clearInterval(interval)\r\n                resolve(curr.value)\r\n            }\r\n        }, 200)\r\n    })\r\n}\r\n\r\nconst result = ref([])\r\nconst start = async arr => {\r\n    run(arr[0]).then(r1 => {\r\n        result.value[0] = r1\r\n\r\n        setTimeout(() => {\r\n            run(arr[1]).then(r2 => {\r\n                result.value[1] = r2\r\n\r\n                setTimeout(() => {\r\n                    run(arr[2]).then(r3 => {\r\n                        result.value[2] = r3\r\n\r\n                        setTimeout(() => {\r\n                            curr.value = 0\r\n                        }, 1500)\r\n                    })\r\n                }, 1500)\r\n            })\r\n        }, 1500)\r\n    })\r\n}\r\n\r\nconst init = () => {\r\n    count = 0\r\n    result.value = []\r\n    if (interval) clearInterval(interval)\r\n}\r\n\r\n\r\nsetTimeout(() => {\r\n    start([17, 22, 13])\r\n}, 2000);\r\n</script>\r\n\r\n<style lang=\"less\">\r\n.page-layout {\r\n    width: 100%;\r\n    height: 100%;\r\n    overflow: hidden;\r\n\r\n    .hand {\r\n        position: absolute;\r\n        width: 90rem;\r\n        height: 100rem;\r\n        top: 50%;\r\n        left: 50%;\r\n        transform: translateX(-50%) translateY(-50%);\r\n\r\n        .hand-item {\r\n            display: flex;\r\n            flex-direction: column;\r\n            position: relative;\r\n\r\n            .finger {\r\n                flex: 1;\r\n                display: flex;\r\n                align-items: center;\r\n                justify-content: center;\r\n                border: 1px solid #fff;\r\n                opacity: 0;\r\n                transition: all ease .3s;\r\n                border-radius: 1rem;\r\n            }\r\n\r\n            .finger1 {\r\n                border-radius: 10rem 6rem 0 0;\r\n            }\r\n\r\n            .finger3 {\r\n                border-bottom: none;\r\n            }\r\n\r\n            .curr-finger {\r\n                opacity: 1;\r\n            }\r\n\r\n            .finger-shadow {\r\n                width: 100%;\r\n                height: 30%;\r\n                border: 1px solid rgba(255, 255, 255, 0.15);\r\n                border-radius: 1rem;\r\n                position: absolute;\r\n                top: 50%;\r\n                left: 50%;\r\n                transform: translateX(-50%) translateY(-50%);\r\n            }\r\n        }\r\n\r\n        .hand0 {\r\n            width: 50rem;\r\n            height: 40rem;\r\n            position: absolute;\r\n            right: 10rem;\r\n            bottom: 0;\r\n            border: 1px solid rgba(255, 255, 255, 0.5);\r\n            border-radius: 12rem 8rem 4rem 2rem;\r\n            border-bottom: none;\r\n\r\n            .line1 {\r\n                width: 26rem;\r\n                height: 20rem;\r\n                position: absolute;\r\n                border-bottom: 1px solid rgba(255, 255, 255, 0.3);\r\n                top: -4rem;\r\n                right: 6rem;\r\n                border-radius: 0 0 0 12rem;\r\n                transform: rotate(4deg);\r\n            }\r\n\r\n            .line2 {\r\n                position: absolute;\r\n                border-top: 1px solid rgba(255, 255, 255, 0.3);\r\n                width: 20rem;\r\n                height: 100rem;\r\n                top: 14rem;\r\n                left: -20rem;\r\n                transform: rotate(30deg);\r\n                border-radius: 0 100rem 0 0;\r\n            }\r\n\r\n            .line3 {\r\n                position: absolute;\r\n                border-top: 1px solid rgba(255, 255, 255, 0.1);\r\n                width: 30rem;\r\n                height: 20rem;\r\n                top: 18rem;\r\n                left: 6rem;\r\n                transform: rotate(24deg);\r\n                border-radius: 2rem 4rem 0 0;\r\n            }\r\n        }\r\n\r\n        .hand1 {\r\n            position: absolute;\r\n            border: 1px solid rgba(255, 255, 255, 0.5);\r\n            width: 10rem;\r\n            height: 50rem;\r\n            top: 12rem;\r\n            left: 30rem;\r\n            transform: rotate(-4deg);\r\n            border-bottom: none;\r\n            border-radius: 10rem 6rem 2rem 2rem;\r\n        }\r\n\r\n        .hand2 {\r\n            position: absolute;\r\n            border: 1px solid rgba(255, 255, 255, 0.5);\r\n            width: 10rem;\r\n            height: 56rem;\r\n            top: 4rem;\r\n            left: 46rem;\r\n            transform: rotate(-1deg);\r\n            border-bottom: none;\r\n            border-radius: 10rem 6rem 2rem 2rem;\r\n        }\r\n\r\n        .hand3 {\r\n            position: absolute;\r\n            border: 1px solid rgba(255, 255, 255, 0.5);\r\n            width: 10rem;\r\n            height: 52rem;\r\n            top: 8rem;\r\n            left: 61rem;\r\n            transform: rotate(3deg);\r\n            border-bottom: none;\r\n            border-radius: 10rem 6rem 2rem 2rem;\r\n        }\r\n\r\n        .hand4 {\r\n            position: absolute;\r\n            border: 1px solid rgba(255, 255, 255, 0.5);\r\n            width: 8rem;\r\n            height: 32rem;\r\n            top: 30rem;\r\n            left: 77rem;\r\n            transform: rotate(12deg);\r\n            border-bottom: none;\r\n            border-radius: 10rem 6rem 2rem 2rem;\r\n        }\r\n\r\n        .hand5 {\r\n            position: absolute;\r\n            top: 52rem;\r\n            left: 8rem;\r\n            transform: rotate(-50deg);\r\n            transition: all ease .2s;\r\n\r\n            .hand5-item1 {\r\n                width: 12rem;\r\n                height: 18rem;\r\n                border: 1px solid rgba(255, 255, 255, 0.6);\r\n                transform: rotate(40deg);\r\n                position: relative;\r\n                left: 5rem;\r\n                bottom: -4rem;\r\n                border-bottom: none;\r\n                border-radius: 1rem 10rem 2rem 0;\r\n                border-top: 1px solid rgba(255, 255, 255, 0.9);\r\n                border-right: 1px solid rgba(255, 255, 255, 0.9);\r\n            }\r\n\r\n            .hand5-item2 {\r\n                width: 13rem;\r\n                height: 14rem;\r\n                border: 1px solid rgba(255, 255, 255, 0.6);\r\n                border-bottom: none;\r\n            }\r\n        }\r\n\r\n        .hand5-1 {\r\n            top: 20rem;\r\n            left: 20rem;\r\n            transform: rotate(20deg);\r\n        }\r\n\r\n        .hand5-2 {\r\n            top: 10rem;\r\n            left: 20rem;\r\n            transform: rotate(12deg);\r\n        }\r\n\r\n        .hand5-3 {\r\n            top: 2rem;\r\n            left: 36rem;\r\n            transform: rotate(16deg);\r\n        }\r\n\r\n        .hand5-4 {\r\n            top: 20rem;\r\n            left: 48rem;\r\n            transform: rotate(40deg);\r\n        }\r\n\r\n        .hand5-5 {\r\n            top: 36rem;\r\n            left: 34rem;\r\n            transform: rotate(40deg);\r\n        }\r\n\r\n        .hand5-6 {\r\n            top: 22rem;\r\n            left: 34rem;\r\n            transform: rotate(24deg);\r\n        }\r\n\r\n        .hand5-7 {\r\n            top: 6rem;\r\n            left: 50rem;\r\n            transform: rotate(20deg);\r\n        }\r\n\r\n        .hand5-8 {\r\n            top: 42rem;\r\n            left: 20rem;\r\n            transform: rotate(20deg);\r\n        }\r\n\r\n        .hand5-9 {\r\n            top: 38rem;\r\n            left: 48rem;\r\n            transform: rotate(40deg);\r\n        }\r\n    }\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}